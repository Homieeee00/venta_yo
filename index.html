<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Punto de Venta - FerreterÃ­a</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: #f2f2f2;
    }
    header {
        background: #ff9800;
        color: white;
        padding: 15px;
        text-align: center;
        font-size: 20px;
        font-weight: bold;
    }
    .productos {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 15px;
        padding: 15px;
    }
    .producto {
        background: white;
        border-radius: 10px;
        padding: 10px;
        text-align: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .producto h3 {
        margin: 10px 0 5px;
        font-size: 16px;
    }
    .producto p {
        margin: 0;
        color: #555;
    }
    .producto button {
        margin-top: 8px;
        background: #4CAF50;
        color: white;
        border: none;
        padding: 8px;
        border-radius: 5px;
        cursor: pointer;
        width: 100%;
    }
    .carrito-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #2196F3;
        color: white;
        border: none;
        padding: 15px;
        border-radius: 50%;
        font-size: 20px;
        cursor: pointer;
        box-shadow: 0 3px 8px rgba(0,0,0,0.3);
    }
    /* Modal */
    .modal {
        display: none;
        position: fixed;
        z-index: 10;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
    }
    .modal-content {
        background: white;
        margin: 40px auto;
        padding: 20px;
        border-radius: 10px;
        width: 90%;
        max-width: 400px;
    }
    .modal h2 {
        text-align: center;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
    }
    th, td {
        padding: 5px;
        text-align: center;
        font-size: 14px;
    }
    .btn-cantidad {
        background: #2196F3;
        color: white;
        border: none;
        padding: 3px 8px;
        border-radius: 3px;
        cursor: pointer;
    }
    .btn-eliminar {
        background: red;
        color: white;
        border: none;
        padding: 3px 8px;
        border-radius: 3px;
        cursor: pointer;
    }
    .cerrar, .imprimir {
        padding: 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        width: 100%;
        margin-top: 10px;
    }
    .cerrar {
        background: red;
        color: white;
    }
    .imprimir {
        background: green;
        color: white;
    }
</style>
</head>
<body>

<header>FerreterÃ­a MÃ³vil</header>

<div class="productos" id="productos"></div>

<button class="carrito-btn" onclick="abrirCarrito()">ðŸ›’</button>

<!-- Modal Carrito -->
<div id="modal" class="modal">
    <div class="modal-content">
        <h2>Carrito</h2>
        <table id="tablaFactura">
            <tr>
                <th>Producto</th>
                <th>Cant.</th>
                <th>Total</th>
                <th>Acciones</th>
            </tr>
        </table>
        <h3>Total: $<span id="totalFactura">0.00</span></h3>
        <button class="imprimir" onclick="imprimirFactura()">Imprimir</button>
        <button class="cerrar" onclick="cerrarCarrito()">Cerrar</button>
    </div>
</div>

<script>
    const productos = [
        { nombre: "Martillo", precio: 120 },
        { nombre: "Destornillador", precio: 45.5 },
        { nombre: "Caja de clavos", precio: 30 },
        { nombre: "Taladro", precio: 1500 },
        { nombre: "Llave inglesa", precio: 80 },
        { nombre: "Cinta mÃ©trica", precio: 35 },
        { nombre: "Pintura blanca 1L", precio: 95 },
        { nombre: "Lija", precio: 10 },
        { nombre: "Sierra manual", precio: 250 },
        { nombre: "Guantes de trabajo", precio: 60 }
    ];

    let carrito = [];

    const contenedor = document.getElementById("productos");
    productos.forEach((p, i) => {
        const div = document.createElement("div");
        div.className = "producto";
        div.innerHTML = `
            <h3>${p.nombre}</h3>
            <p>$${p.precio.toFixed(2)}</p>
            <button onclick="agregar(${i})">Agregar</button>
        `;
        contenedor.appendChild(div);
    });

    function agregar(i) {
        const producto = productos[i];
        const existe = carrito.find(item => item.nombre === producto.nombre);
        if (existe) {
            existe.cantidad++;
        } else {
            carrito.push({ ...producto, cantidad: 1 });
        }
    }

    function abrirCarrito() {
        const tabla = document.getElementById("tablaFactura");
        tabla.innerHTML = `
            <tr>
                <th>Producto</th>
                <th>Cant.</th>
                <th>Total</th>
                <th>Acciones</th>
            </tr>
        `;
        let total = 0;
        carrito.forEach((p, index) => {
            total += p.precio * p.cantidad;
            tabla.innerHTML += `
                <tr>
                    <td>${p.nombre}</td>
                    <td>${p.cantidad}</td>
                    <td>$${(p.precio * p.cantidad).toFixed(2)}</td>
                    <td>
                        <button class="btn-cantidad" onclick="cambiarCantidad(${index}, 1)">+</button>
                        <button class="btn-cantidad" onclick="cambiarCantidad(${index}, -1)">-</button>
                        <button class="btn-eliminar" onclick="eliminar(${index})">x</button>
                    </td>
                </tr>
            `;
        });
        document.getElementById("totalFactura").textContent = total.toFixed(2);
        document.getElementById("modal").style.display = "block";
    }

    function cambiarCantidad(index, cambio) {
        carrito[index].cantidad += cambio;
        if (carrito[index].cantidad <= 0) {
            carrito.splice(index, 1);
        }
        abrirCarrito();
    }

    function eliminar(index) {
        carrito.splice(index, 1);
        abrirCarrito();
    }

    function cerrarCarrito() {
        document.getElementById("modal").style.display = "none";
    }

    function imprimirFactura() {
        let ventana = window.open('', '', 'width=300,height=600');
        ventana.document.write("<h2>Factura FerreterÃ­a</h2>");
        carrito.forEach(p => {
            ventana.document.write(`<p>${p.cantidad} x ${p.nombre} - $${(p.precio * p.cantidad).toFixed(2)}</p>`);
        });
        ventana.document.write(`<hr><h3>Total: $${document.getElementById("totalFactura").textContent}</h3>`);
        ventana.document.write("<p>Gracias por su compra</p>");
        ventana.document.close();
        ventana.print();
    }
</script>

</body>
</html>
